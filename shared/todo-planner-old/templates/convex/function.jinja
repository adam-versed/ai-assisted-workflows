{{ header }}
// Kind: convex-function
// Stack: convex

import { mutation, query } from "convex/server";

{% set opts = file.options | default({}) %}
{% set schema = opts.validation in ['convex-schema', 'zod', 'none'] %}

export const upsertScan = mutation(async (ctx, args) => {
  // BEGIN-IMPL (keep)
  // TODO: Base
  // - ADVICE:CVX:BASE: Keep mutations deterministic and fast; no external side-effects
  {% if schema %}
  // ADVICE:CVX:SCHEMA (when chosen)
  // - Validate args against schema ({{ opts.validation or 'none' }})
  {% endif %}
  // END-IMPL
});

export const getScan = query(async (ctx, args) => {
  // BEGIN-IMPL (keep)
  // TODO: Base
  // - ADVICE:CVX:BASE: Use indexes and narrow fields; avoid heavy joins
  // END-IMPL
});
